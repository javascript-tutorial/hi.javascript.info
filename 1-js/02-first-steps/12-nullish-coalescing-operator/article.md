# Nullish coalescing operator '??'

[recent browser="new"]

इस लेख में, हम यह कहेंगे कि एक व्यंजक को परिभाषित (defined) तब मानेंगे, जब उसका मान न तो `null` हो और न ही `undefined`।

नलिश कोलेसिंग (या शून्यवत् सम्मिलन) ऑपरेटर को दो प्रश्न चिन्ह, `??` लिखकर प्रयोग में लाया जाता है।

`a ?? b` का परिणाम :
- `a` होगा, यदि `a` परिभाषित है।
- `b` होगा, यदि `b` परिभाषित नही है।

दूसरे शब्दों में, हम यह कह सकते हैं कि अगर पहला argument (तर्क) `null/undefined` नही है तब `??` ऑपरेटर `a` का मान लौटाएगा, नहीं तो `b`।

यह कोई बिल्कुल नया ऑपरेटर नहीं है, बल्कि बस एक आसान तरीका है यह जानने के लिए कि दोनों में से पहला कौन-सा वेरिएबल "परिभाषित" है।

जैसा की हम यह पहले से जानते हैं, `result = a ?? b` को हम कुछ इस प्रकार, `?` ऑपरेटर के साथ लिखा जा सकता है :

```js
result = (a !== null && a !== undefined) ? a : b;
```

`??` ऑपरेटर का प्रयोग हम उन variable को एक डिफॉल्ट मान प्रदान करने के लिए या उनके स्थान पर एक डिफॉल्ट मान रखने के लिए कर सकते हैं, जिन्हे अभी तक परिभाषित न किया गया हो।

उदाहरण के लिए, यहां पर हमें `user` के परिभाषित न होने के कारण `गुमनाम` दिखेगा। 

```js run
let user;

alert(user ?? "गुमनाम"); // गुमनाम
```

यदि `user` का मान `null/undefined` के अलावा कुछ होता, निश्चित रूप से हमें कुछ ऐसा परिणाम मिलता : 

```js run
let user = "जॉन";

alert(user ?? "Anonymous"); // जॉन
```

किसी सूची में से पहले निश्चित मान के चुनाव के लिए भी हम `??` को उपयोग में ला सकते हैं। 

चलिए मान लेते हैं, हमारे पास किसी ग्राहक का डाटा `firstName`, `lastName` या `nickName` में संग्रहित है। ये सभी वेरिएबल `undefined` हो सकते हैं यदि ग्राहक कोई मान दर्ज नहीं करता।

अब हम इनमे से किसी वेरिएबल का उपयोग करके ग्राहक का नाम प्रदर्शित करना चाहते हैं। इनमे से कुछ परिभाषित न होने पर `बेनाम` दिखाना चाहते हैं। 

देखते हैं, यहां `??` कैसे मदद करता है:

```js run
let firstName = null;
let lastName = null;
let nickName = "सूपर कोडर";

// पहला परिभाषित मान प्रदर्शित होगी :
*!*
alert(firstName ?? lastName ?? nickName ?? "बेनाम"); // सूपर कोडर
*/!*
```

## || के साथ तुलना

जैसा कि हमने [पिछले अध्याय](info:logical-operators#or-finds-the-first-truthy-value) में देखा, हम `??` की तरह OR ऑपरेटर का भी इस्तेमाल में ला सकते हैं।

उदाहरण के लिए, यदि पिछले कोड में `??` की जगह `||` को रखा जाए, हमें वही परिणाम देखने मिलेंगे :

```js run
let firstName = null;
let lastName = null;
let nickName = "सूपर कोडर";

// पहला परिभाषित मान प्रदर्शित होगा :
*!*
alert(firstName || lastName || nickName || "बेनाम"); // सूपर कोडर
*/!*
```

जावास्क्रिप्ट में शुरुआत से OR `||` ऑपरेटर मौजूद रहा है, इसलिए आमतौर पर डेवलपर्स इसका प्रयोग इस उद्देश्य से करते आए हैं।

वहीं दूसरी ओर, नल्लिश कोलेसिंग ऑपरेटर `??` को हाल ही में जावास्क्रिप्ट में स्थान दिया गया, और ऐसा लोगो का `||` से असंतुष्टि के कारण हुआ।

इनके बीच का बड़ा अंतर यह था कि :
- `||` पहला `सत्य` मान को लौटता है। जबकि
- `??` पहले `निश्चित` मान को लौटता है। 

दूसरे शब्दों में, `false`, `0`, खाली स्ट्रिंग `""` और `null/undefined` के बीच अंतर `||` ऑपरेटर को नहीं दिखता है। इनके लिए यह सब एक -- झूठे मान के बराबर थे। इसलिए अगर कभी इनमे से किसी मान से `||` को गुरजरना पड़ता, हमें इससे अगला तर्क ही परिणाम स्वरूप देखने मिलता।  

व्यवहारिक रूप से, हम इसका इस्तेमाल डिफॉल्ट मान के साथ तभी करेंगे, जब वेरिएबल का मान `null/undefined` हो। अर्थात, जब मान अज्ञात/सेट न हो।

इस उदाहरण को देखते हैं : 

```js run
let height = 0;

alert(height || 100); // 100
alert(height ?? 100); // 0
```

- `height || 100` पहले `height` का मान गलत होना सुनिश्चित करेगा, जो यहां पहले से है।
    - इसलिए हमे परिणामस्वरूप दूसरा तर्क, `100` देखने मिलेगा।
- जबकि अगले लाइन में, `height ?? 100` यह सुनिश्चित करेगा कि `height` कहीं  `null/undefined` तो नहीं, और वह नहीं है,
    - परिणामस्वरूप हमें `height` का मान, `0` देखने मिलेगा।

व्यवहारिक रूप से, शून्य height ज़रूरत अनुसार मान्य मान हो सकता है, जिसे डिफ़ॉल्ट मान से नहीं बदला जाना चाहिए। इसलिए, `??` ऑपरेटर यहां सही कार्य करता है।


## प्राथमिकता (precedence)

[MDN table](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence#Table) के अनुसार `5`: `??` ऑपरेटर को अपेक्षाकृत कम प्राथमिकता मिली है। इसका मतलब यह है कि `??` का मूल्यांकन `=` और `?` से पहले होता है, लेकिन `+`, `*` जैसे अधिकांश अन्य कार्यों के बाद होता है।

इसलिए, अब अगर बाकी ऑपरेटरों के बीच `??` की सहायता से मूल्यों का चुनाव करना हो, हमें कोष्ठक चिन्ह को प्रयोग में लेना होगा : 

```js run
let height = null;
let width = null;

// ध्यान दें : कोष्ठकों का उपयोग करें
let area = (height ?? 100) * (width ?? 50);

alert(area); // 5000
```

यदि हम कोष्ठकों को छोड़ देते, `*` की प्राथमिकता `??` से ज्यादा होने के कारण, वह पहले निष्पादित होगा, लेकिन गलत परिणाम के साथ : 

```js
// कोष्ठकों से रहित
let area = height ?? 100 * width ?? 50;

// ... कुछ ऐसे काम करेगा (और शायद हम यह न करना चाहें):
let area = height ?? (100 * width) ?? 50;
```

### || और && के साथ ??

कुछ सुरक्षा कारणों को मध्यनजर रखते हुए, जावास्क्रिप्ट हमें `??` का उपयोग `&&` और `||` ऑपरेटर के साथ करने की अनुमति नहीं देता। इसके कारण, कोष्ठकों द्वारा प्राथमिकता सुनिश्चित करा जाना आवश्यक है।

यह कोड हमें एक सिंटेक्स एरर (syntax error) देता है : 

```js run
let x = 1 && 2 ?? 3; // सिंटेक्स एरर
```
<!-- starting from here -->
यह बाधा विवाद-योग्य हो सकती है। लेकिन यह प्रतिबंध `||` की जगह `??` अपनाने वाले नए डेवलपरों द्वारा प्रोग्रामिंग में की गई गलतियों से बचने के लिए लगाया गया था।
<!-- ^this portion needs some sort of edit (maybe) for easier to understand tone -->

इसलिए, इनको साथ में इस्तेमाल करने के लिए कोष्ठाकों का स्पष्ट रूप से प्रयोग करें :

```js run
*!*
let x = (1 && 2) ?? 3; // कोई एरर नहीं
*/!*

alert(x); // 2
```

## सारांश

- जावास्क्रिप्ट में, नल्लिश कोलेसिंग ऑपरेटर `??` (nullish coalescing operator) हमें एक सूची से पहला "परिभाषित" मान चुनने का एक संक्षिप्त तरीका प्रदान करता है।

    इससे वेरिएबल को एक डिफॉल्ट मान दिया जा सकता है : 

    ```js
    // अगर height का मान null या undefined है
    height = height ?? 100; // height = 100
    ```

- `??` ऑपरेटर को प्राथमिकता में काफी कम अंक दिया गया है। साथ ही, यह प्राथमिकता में `?` और `=` ऑपरेटर से थोड़ा ही आगे है, इसलिए `??` का उपयोग करने वाले व्यंजको में कोष्ठकों के बारें में जरूर सोचें।

- जावास्क्रिप्ट में `||` या `&&` के साथ `??` का प्रयोग, स्पष्ट कोष्ठकों के बिना वर्जित है।
